# 1. 베이스 이미지 가져오기
# (설명: 윈도우 깔듯이, Node.js 18버전이 설치된 리눅스 컴퓨터를 기본으로 씁니다)
FROM node:18

# 2. 작업 폴더 설정
# (설명: 컨테이너 내부의 /app 이라는 폴더에서 작업을 하겠다고 선언합니다)
WORKDIR /app

# 3. 패키지 명세서 복사
# (설명: 설치할 라이브러리 목록인 package.json 파일만 먼저 복사합니다. 
#  전체 코드를 복사하기 전에 이것만 먼저 하면, 설치 속도(캐싱)가 빨라집니다.)
COPY package.json .

# 4. 라이브러리 설치
# (설명: package.json에 적힌 리액트, 라우터 등의 부품들을 다운로드합니다)
RUN npm install

# 5. 소스 코드 복사
# (설명: 내 컴퓨터에 있는 나머지 모든 소스 코드(.js, .css 등)를 컨테이너로 복사합니다)
COPY . .

# 6. 포트 열기
# (설명: 이 컨테이너는 3000번 구멍(포트)을 통해 밖이랑 소통할 거라고 알려줍니다)
EXPOSE 3000

# 7. 실행 명령어
# (설명: 컨테이너가 켜지면 'npm start'를 입력해서 리액트를 실행하라는 뜻입니다)
CMD ["npm", "start"]